{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Totof\\\\Documents\\\\LaCapsule\\\\Semaine6-react\\\\MorningNews\\\\part4\\\\front\\\\src\\\\ScreenArticlesBySource.js\";\nimport React, { useState, useEffect } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport './App.css';\nimport { Card, Icon, Modal } from 'antd';\nimport Nav from './Nav';\nimport { connect } from 'react-redux';\nconst {\n  Meta\n} = Card;\n\nfunction ScreenArticlesBySource(props) {\n  const idSource = props.match.params.id;\n  const [articleList, setArticleList] = useState([]);\n  const [visible, setVisible] = useState(false); // Visibilité de la modal\n\n  const [title, setTitle] = useState('');\n  const [content, setContent] = useState('');\n  useEffect(() => {\n    async function loadArticles() {\n      // On interroge l'api pour récup la liste des sources\n      const rawResponse = await fetch(`https://newsapi.org/v2/top-headlines?sources=${idSource}&apiKey=ab9c4b0f827c443dbc683714a21e9e38`);\n      const response = await rawResponse.json();\n      setArticleList(response.articles);\n    }\n\n    loadArticles(); // eslint-disable-next-line\n  }, []);\n\n  if (!props.token) {\n    return React.createElement(Redirect, {\n      to: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 34\n      },\n      __self: this\n    });\n  }\n\n  async function addToWishList(article) {\n    console.log(props.token);\n    console.log(JSON.stringify(article));\n    var articleData = JSON.stringify(article);\n    await fetch('/add-article/' + props.token + '/' + props.langue[0], {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/Json'\n      },\n      body: articleData\n    }); //props.addToWishList(article)\n  }\n\n  let showModal = (title, content) => {\n    setVisible(!visible);\n    setTitle(title);\n    setContent(content);\n  };\n\n  let closeModal = () => {\n    setVisible(!visible);\n  };\n\n  let listArticles = articleList.map((article, i) => {\n    return React.createElement(\"div\", {\n      key: i,\n      style: {\n        display: 'flex',\n        justifyContent: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, React.createElement(Card, {\n      key: i,\n      style: {\n        width: 300,\n        margin: '15px',\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'space-between'\n      },\n      cover: React.createElement(\"img\", {\n        alt: article.title,\n        src: article.urlToImage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }),\n      actions: [React.createElement(Icon, {\n        onClick: () => showModal(article.title, article.content),\n        type: \"read\",\n        key: \"ellipsis2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }), React.createElement(Icon, {\n        onClick: () => addToWishList(article),\n        type: \"like\",\n        key: \"ellipsis\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      })],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, React.createElement(Meta, {\n      title: article.title,\n      description: article.description,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    })), React.createElement(Modal, {\n      title: title,\n      visible: visible,\n      onOk: closeModal,\n      onCancel: closeModal,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, content)));\n  });\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }, React.createElement(Nav, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"Banner\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"Card\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }, listArticles));\n}\n\nfunction mapStateToProps(state) {\n  return {\n    token: state.userToken,\n    langue: state.langueCode\n  };\n}\n\nexport default connect(mapStateToProps, null)(ScreenArticlesBySource);","map":{"version":3,"sources":["C:/Users/Totof/Documents/LaCapsule/Semaine6-react/MorningNews/part4/front/src/ScreenArticlesBySource.js"],"names":["React","useState","useEffect","Redirect","Card","Icon","Modal","Nav","connect","Meta","ScreenArticlesBySource","props","idSource","match","params","id","articleList","setArticleList","visible","setVisible","title","setTitle","content","setContent","loadArticles","rawResponse","fetch","response","json","articles","token","addToWishList","article","console","log","JSON","stringify","articleData","langue","method","headers","body","showModal","closeModal","listArticles","map","i","display","justifyContent","width","margin","flexDirection","urlToImage","description","mapStateToProps","state","userToken","langueCode"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport {Redirect} from 'react-router-dom';\r\nimport './App.css';\r\nimport { Card, Icon, Modal} from 'antd';\r\nimport Nav from './Nav'\r\nimport { connect } from 'react-redux';\r\n\r\nconst { Meta } = Card;\r\n\r\nfunction ScreenArticlesBySource(props) {\r\n\r\n  const idSource = props.match.params.id\r\n\r\n  const [articleList, setArticleList] = useState([]);\r\n\r\n  const [visible, setVisible] = useState(false); // Visibilité de la modal\r\n  const [title, setTitle] = useState('');\r\n  const [content, setContent] = useState('');\r\n\r\n\r\n  useEffect(() => {\r\n    async function loadArticles() {\r\n      // On interroge l'api pour récup la liste des sources\r\n      const rawResponse = await fetch(`https://newsapi.org/v2/top-headlines?sources=${idSource}&apiKey=ab9c4b0f827c443dbc683714a21e9e38`);\r\n      const response = await rawResponse.json();\r\n      setArticleList(response.articles);\r\n\r\n    }\r\n    loadArticles();\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  if(!props.token){\r\n    return <Redirect to='/' />\r\n  }\r\n\r\n  async function addToWishList(article){\r\n    console.log(props.token);\r\n\r\n    console.log(JSON.stringify(article))\r\n     var articleData = JSON.stringify(article)\r\n\r\n\r\n    await fetch('/add-article/' + props.token + '/' + props.langue[0], {\r\n      method: 'POST',\r\n      headers: {'Content-Type':'application/Json'},\r\n      body: articleData\r\n    })\r\n    \r\n    //props.addToWishList(article)\r\n  }\r\n\r\n  let showModal = (title, content) => {\r\n    setVisible(!visible);\r\n    setTitle(title);\r\n    setContent(content)\r\n  }\r\n\r\n  let closeModal = () => {\r\n    setVisible(!visible);\r\n  }\r\n\r\n  let listArticles = articleList.map((article, i) => {\r\n    return (\r\n      <div key={i} style={{ display: 'flex', justifyContent: 'center' }}>\r\n        <Card key={i}\r\n          style={{\r\n            width: 300,\r\n            margin: '15px',\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            justifyContent: 'space-between'\r\n          }}\r\n          cover={\r\n            <img\r\n              alt={article.title}\r\n              src={article.urlToImage}\r\n            />\r\n          }\r\n          actions={[\r\n            <Icon onClick={()=>showModal(article.title, article.content)} type=\"read\" key=\"ellipsis2\" />,\r\n\r\n            <Icon onClick={()=>addToWishList(article)} type=\"like\" key=\"ellipsis\" />\r\n          ]}\r\n        >\r\n          <Meta\r\n            title={article.title}\r\n            description={article.description}\r\n          />\r\n\r\n        </Card>\r\n        <Modal\r\n          title={title}\r\n          visible={visible}\r\n          onOk={closeModal}\r\n          onCancel={closeModal}\r\n        >\r\n          <p>{content}</p>\r\n        </Modal>\r\n      </div>\r\n    );\r\n  });\r\n\r\n\r\n  return (\r\n    <div>\r\n\r\n      <Nav />\r\n\r\n      <div className=\"Banner\" />\r\n\r\n      <div className=\"Card\">\r\n\r\n        {listArticles}\r\n\r\n      </div>\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return { token: state.userToken,\r\n            langue: state.langueCode }\r\n}\r\n\r\n\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  null\r\n )(ScreenArticlesBySource);\r\n"]},"metadata":{},"sourceType":"module"}