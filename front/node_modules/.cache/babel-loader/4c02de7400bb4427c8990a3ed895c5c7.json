{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Totof\\\\Documents\\\\LaCapsule\\\\Semaine6-react\\\\MorningNews\\\\part4\\\\front\\\\src\\\\ScreenMyArticles.js\";\nimport React, { useState, useEffect } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport './App.css';\nimport { Card, Icon, Modal } from 'antd';\nimport Nav from './Nav';\nimport { connect } from 'react-redux';\nconst {\n  Meta\n} = Card;\n\nfunction ScreenMyArticles(props) {\n  const [wishList, setWishList] = useState([]);\n  const [visible, setVisible] = useState(false); // Visibilité de la modal\n\n  const [title, setTitle] = useState('');\n  const [content, setContent] = useState('');\n  const [langue, setLangue] = useState(props.language[0]);\n  useEffect(() => {\n    async function loadWishlist() {\n      // On interroge l'api pour récup la wishlist\n      const data = await fetch(`/get-wishlist/${props.token}`);\n      const response = await data.json();\n      console.log(response.user);\n      console.log(langue);\n      if (langue === 'fr') setWishList(response.user.wishlistFR);else if (langue === 'en') setWishList(response.user.wishlistEN);\n    }\n\n    loadWishlist(); // eslint-disable-next-line\n  }, [langue]);\n\n  if (!props.token) {\n    return React.createElement(Redirect, {\n      to: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46\n      },\n      __self: this\n    });\n  }\n\n  function clickFR() {\n    props.setLanguage(\"fr\", \"fr\");\n    setLangue('fr');\n  }\n\n  function clickEN() {\n    props.setLanguage(\"en\", \"us\");\n    setLangue('en');\n  }\n\n  async function deleteToWishList(article, pos) {\n    const data = await fetch(`/delete-article/${props.token}/${pos}`, {\n      method: 'DELETE'\n    });\n    const response = await data.json();\n    setWishList(response.user.wishlist);\n  }\n\n  let showModal = (title, content) => {\n    setVisible(!visible);\n    setTitle(title);\n    setContent(content);\n  };\n\n  let closeModal = () => {\n    setVisible(!visible);\n  };\n\n  let listArticles = wishList.map((article, i) => {\n    return React.createElement(\"div\", {\n      key: i,\n      style: {\n        display: 'flex',\n        justifyContent: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, React.createElement(Card, {\n      style: {\n        width: 300,\n        margin: '15px',\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'space-between'\n      },\n      cover: React.createElement(\"img\", {\n        alt: article.title,\n        src: article.urlToImage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }),\n      actions: [React.createElement(Icon, {\n        onClick: () => showModal(article.title, article.content),\n        type: \"read\",\n        key: \"ellipsis2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }), React.createElement(Icon, {\n        onClick: () => deleteToWishList(article, i),\n        type: \"delete\",\n        key: \"ellipsis\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      })],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, React.createElement(Meta, {\n      title: article.title,\n      description: article.description,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    })), React.createElement(Modal, {\n      title: title,\n      visible: visible,\n      onOk: closeModal,\n      onCancel: closeModal,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, content)));\n  });\n  let selectFR;\n  let selectUK;\n\n  if (langue === 'fr') {\n    selectFR = {\n      border: \"5px solid #FFEFBF\"\n    };\n    selectUK = null;\n  } else if (langue === 'en') {\n    selectUK = {\n      border: \"5px solid #FFEFBF\"\n    };\n    selectFR = null;\n  }\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  }, React.createElement(Nav, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"Banner\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    style: selectFR,\n    className: \"Flag\",\n    src: \"images/flagFrance.png\",\n    alt: \"france\",\n    onClick: clickFR,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145\n    },\n    __self: this\n  }), React.createElement(\"img\", {\n    style: selectUK,\n    className: \"Flag\",\n    src: \"images/flagUK.png\",\n    alt: \"u-k\",\n    onClick: clickEN,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"Card\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150\n    },\n    __self: this\n  }, wishList.length > 0 ? listArticles : React.createElement(\"div\", {\n    style: {\n      marginTop: \"30px\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155\n    },\n    __self: this\n  }, \"Aucun article\")));\n}\n\nfunction mapStateToProps(state) {\n  return {\n    token: state.userToken,\n    language: state.langueCode\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    setLanguage: function (langue, country) {\n      dispatch({\n        type: 'changeLanguage',\n        langue: [langue, country]\n      });\n    }\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ScreenMyArticles);","map":{"version":3,"sources":["C:/Users/Totof/Documents/LaCapsule/Semaine6-react/MorningNews/part4/front/src/ScreenMyArticles.js"],"names":["React","useState","useEffect","Redirect","Card","Icon","Modal","Nav","connect","Meta","ScreenMyArticles","props","wishList","setWishList","visible","setVisible","title","setTitle","content","setContent","langue","setLangue","language","loadWishlist","data","fetch","token","response","json","console","log","user","wishlistFR","wishlistEN","clickFR","setLanguage","clickEN","deleteToWishList","article","pos","method","wishlist","showModal","closeModal","listArticles","map","i","display","justifyContent","width","margin","flexDirection","urlToImage","description","selectFR","selectUK","border","length","marginTop","mapStateToProps","state","userToken","langueCode","mapDispatchToProps","dispatch","country","type"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport {Redirect} from 'react-router-dom';\r\nimport './App.css';\r\nimport { Card, Icon, Modal } from 'antd';\r\nimport Nav from './Nav'\r\nimport { connect } from 'react-redux';\r\n\r\nconst { Meta } = Card;\r\n\r\nfunction ScreenMyArticles(props) {\r\n\r\n  const [wishList, setWishList] = useState([]);\r\n\r\n\r\n  const [visible, setVisible] = useState(false); // Visibilité de la modal\r\n  const [title, setTitle] = useState('');\r\n  const [content, setContent] = useState('');\r\n\r\n  const [langue, setLangue] = useState(props.language[0]);\r\n  \r\n\r\n\r\n  useEffect(() => {\r\n  \r\n    async function loadWishlist() {\r\n      // On interroge l'api pour récup la wishlist\r\n      const data = await fetch(`/get-wishlist/${props.token}`);\r\n      const response = await data.json();\r\n      console.log(response.user);\r\n      console.log(langue);\r\n      if(langue === 'fr')\r\n        setWishList(response.user.wishlistFR);\r\n\r\n      else if(langue === 'en')\r\n        setWishList(response.user.wishlistEN);\r\n\r\n    }\r\n    loadWishlist();\r\n\r\n\r\n    // eslint-disable-next-line\r\n  }, [langue]);\r\n\r\n\r\n  if(!props.token){\r\n      return <Redirect to='/' />\r\n    }\r\n\r\n    function clickFR(){\r\n      props.setLanguage(\"fr\", \"fr\");\r\n      setLangue('fr');\r\n    }\r\n\r\n    function clickEN(){\r\n      props.setLanguage(\"en\", \"us\");\r\n      setLangue('en');\r\n    }\r\n\r\nasync function deleteToWishList(article, pos) {\r\n  const data = await fetch(`/delete-article/${props.token}/${pos}`, {\r\n    method: 'DELETE'\r\n  });\r\n  const response = await data.json();\r\n  setWishList(response.user.wishlist);\r\n}\r\n\r\n\r\n  let showModal = (title, content) => {\r\n    setVisible(!visible);\r\n    setTitle(title);\r\n    setContent(content)\r\n  }\r\n\r\n  let closeModal = () => {\r\n    setVisible(!visible);\r\n  }\r\n\r\n\r\n  let listArticles = wishList.map((article, i) => {\r\n      return (\r\n        <div key={i} style={{ display: 'flex', justifyContent: 'center' }}>\r\n      <Card \r\n        style={{\r\n          width: 300,\r\n          margin: '15px',\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          justifyContent: 'space-between'\r\n        }}\r\n        cover={\r\n          <img\r\n            alt={article.title}\r\n            src={article.urlToImage}\r\n          />\r\n\r\n        }\r\n\r\n        actions={[\r\n          <Icon onClick={()=>showModal(article.title, article.content)} type=\"read\" key=\"ellipsis2\" />,\r\n          <Icon onClick={()=>deleteToWishList(article, i)} type=\"delete\" key=\"ellipsis\" />\r\n        ]}\r\n      >\r\n\r\n        <Meta\r\n          title={article.title}\r\n          description={article.description}\r\n        />\r\n\r\n\r\n\r\n      </Card>\r\n      <Modal \r\n      title={title}\r\n      visible={visible}\r\n      onOk={closeModal}\r\n      onCancel={closeModal}\r\n    >\r\n      <p>{content}</p>\r\n    </Modal>\r\n    </div>\r\n    )\r\n    \r\n    \r\n  });\r\n\r\n  let selectFR;\r\n  let selectUK;\r\n\r\n  if(langue === 'fr'){\r\n    selectFR = {border: \"5px solid #FFEFBF\"}\r\n    selectUK = null\r\n  } else if (langue === 'en'){\r\n    selectUK = {border: \"5px solid #FFEFBF\"}\r\n    selectFR = null\r\n  }\r\n  \r\n\r\n  return (\r\n    <div>\r\n\r\n      <Nav />\r\n\r\n      \r\n      <div className=\"Banner\">\r\n        <img style={selectFR} className=\"Flag\" src=\"images/flagFrance.png\" alt=\"france\" onClick={clickFR} />\r\n        <img style={selectUK} className=\"Flag\" src=\"images/flagUK.png\" alt=\"u-k\" onClick={clickEN} />\r\n      </div>\r\n      \r\n\r\n      <div className=\"Card\">\r\n\r\n\r\n        \r\n\r\n          {wishList.length >0 ?listArticles:<div style={{marginTop: \"30px\"}}>Aucun article</div>}\r\n          \r\n\r\n        \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n      </div>\r\n\r\n\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return { \r\n    token: state.userToken,\r\n    language : state.langueCode\r\n  }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch){\r\n  return {\r\n    setLanguage: function(langue, country){\r\n      dispatch({type: 'changeLanguage', langue: [langue, country]})\r\n    }\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ScreenMyArticles);\r\n"]},"metadata":{},"sourceType":"module"}